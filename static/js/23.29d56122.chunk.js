(this["webpackJsonpdashboard-admin"]=this["webpackJsonpdashboard-admin"]||[]).push([[23],{2317:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return z}));var a=n(23),s=n(690),i=n(20),c=n(64),r=n(284),o=n(693),u=n(3),l=n(42),d=n.n(l),b=n(70),j=(n(1),n(180)),O=n(128),m=n(172),h=n(145),f=n(179),x=n(706),p=n(2298),v=n(664),g=n(689),y=n(713),S=n(640),B=n(683),k=n(2306),q=n(2310),D=n(228),T=n(705),A=n(698),C=n(0),w=j.f().shape({name:j.g().matches(A.b,"Cannot include special characters.").required("Name is required"),brand:j.g().required("Brand is required"),bonuses:j.a(),endDate:j.c().nullable(!0),ticketRules:j.a()});function R(e){var t=e.isEdit,n=e.currentBonusSet,s=Object(a.h)(),c=Object(O.useSnackbar)().enqueueSnackbar,r=Object(f.e)({enableReinitialize:!0,initialValues:{name:(null===n||void 0===n?void 0:n.name)||"",brand:(null===n||void 0===n?void 0:n.brand)||"Adidas",bonuses:(null===n||void 0===n?void 0:n.bonuses)||[],endDate:(null===n||void 0===n?void 0:n.endDate)?new Date(n.endDate):null,ticketRules:(null===n||void 0===n?void 0:n.ticketRules)||[]},validationSchema:w,onSubmit:function(){var e=Object(b.a)(d.a.mark((function e(n,a){var r,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.setSubmitting,o=a.resetForm,u=a.setErrors,alert(JSON.stringify(n));try{o(),r(!1),c(t?"Update success":"Create success",{variant:"success"}),s(i.b.bonus.list)}catch(l){console.error(l),r(!1),u(l)}case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),o=r.errors,l=r.values,j=r.touched,A=r.handleSubmit,R=r.isSubmitting,z=r.setFieldValue,V=r.getFieldProps;return console.log("*** ",l,o),Object(C.jsx)(f.c,{value:r,children:Object(C.jsx)(f.b,{noValidate:!0,autoComplete:"off",onSubmit:A,children:Object(C.jsx)(g.a,{children:Object(C.jsx)(y.a,{children:Object(C.jsxs)(S.a,{spacing:3,children:[Object(C.jsxs)(S.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(C.jsx)(B.a,Object(u.a)(Object(u.a)({fullWidth:!0,size:"small",label:"Name"},V("name")),{},{error:Boolean(j.name&&o.name),helperText:j.name&&o.name})),Object(C.jsx)(B.a,Object(u.a)(Object(u.a)({select:!0,fullWidth:!0,size:"small",label:"Select Brand",placeholder:"Brand"},V("brand")),{},{SelectProps:{native:!0},error:Boolean(j.brand&&o.brand),helperText:j.brand&&o.brand,children:["Adidas","Nike"].map((function(e,t){return Object(C.jsx)("option",{value:e,children:e},e+t)}))})),Object(C.jsx)(p.a,{label:"End date",value:l.endDate?l.endDate:z("endDate",Object(m.a)(new Date,45)),inputFormat:"dd/MM/yyyy hh:mm a",onChange:function(e){return Object(h.a)(e)?z("endDate",e):null},renderInput:function(e){return Object(C.jsx)(B.a,Object(u.a)(Object(u.a)({},e),{},{size:"small",fullWidth:!0,error:Boolean(j.endDate&&o.endDate),helperText:j.endDate&&o.endDate,sx:{mb:3}}))}})]}),Object(C.jsxs)(S.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(C.jsx)(k.a,{fullWidth:!0,multiple:!0,disableCloseOnSelect:!0,size:"small",value:l.bonuses,onChange:function(e,t){console.log(t),z("bonuses",t)},options:[{name:"Bonus 1",quantity:100,quantityToAssign:0,value:20},{name:"Bonus 2",quantity:50,quantityToAssign:0,value:40},{name:"Bonus 3",quantity:200,quantityToAssign:0,value:30},{name:"Bonus 4",quantity:40,quantityToAssign:0,value:15},{name:"Bonus 5",quantity:120,quantityToAssign:0,value:25}],isOptionEqualToValue:function(e,t){return e.name===t.name},renderTags:function(e,t){return e.map((function(e,n){return Object(C.jsx)(q.a,Object(u.a)({label:"".concat(e.name," Qty: ").concat(e.quantity)},t({index:n})),n)}))},getOptionLabel:function(e){return e.name},renderOption:function(e,t){return Object(C.jsxs)(D.a,Object(u.a)(Object(u.a)({component:"li",sx:{fontSize:15,"& > span":{mr:"10px",fontSize:18}}},e),{},{children:[t.name," Qty: ",t.quantity]}))},renderInput:function(e){return Object(C.jsx)(B.a,Object(u.a)(Object(u.a)({},e),{},{label:"Bonuses",error:Boolean(j.bonuses&&o.bonuses),helperText:j.bonuses&&o.bonuses||"Total value of this bonus set: ".concat(l.bonuses.reduce((function(e,t){return e+5*t.quantity}),0))}))}}),Object(C.jsx)(k.a,{fullWidth:!0,multiple:!0,disableCloseOnSelect:!0,size:"small",value:l.ticketRules,onChange:function(e,t){z("ticketRules",t)},options:["Default Historical Data","Default App Level","Default Followers","Default Social","Historical V2"],renderInput:function(e){return Object(C.jsx)(B.a,Object(u.a)(Object(u.a)({},e),{},{label:"Ticket Rules",error:Boolean(j.ticketRules&&o.ticketRules),helperText:j.ticketRules&&o.ticketRules}))}})]}),l.bonuses.length>0&&Object(C.jsx)(f.a,{name:"bonuses",render:function(){return Object(C.jsxs)(g.a,{children:[Object(C.jsx)(T.a,{title:"Set Bonus Quantities for this set"}),Object(C.jsx)(y.a,{children:Object(C.jsx)(S.a,{spacing:2,children:l.bonuses.map((function(e,t){var n="bonuses.".concat(t);return Object(C.jsx)(B.a,Object(u.a)(Object(u.a)({type:"number",fullWidth:!0,size:"small",label:"".concat(e.name," quantity (available ").concat(e.quantity,")")},V("".concat(n,".quantityToAssign"))),{},{error:Boolean(Object(f.d)(j,"".concat(n,".quantityToAssign"))&&Object(f.d)(o,"".concat(n,".quantityToAssign"))),helperText:Object(f.d)(j,"".concat(n,".quantityToAssign"))&&Object(f.d)(o,"".concat(n,".quantityToAssign"))||"Bonus Value: ".concat(e.value," Total Value: ").concat(e.value*e.quantityToAssign)}),t)}))})})]})}}),Object(C.jsx)(D.a,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:Object(C.jsx)(v.a,{type:"submit",variant:"contained",loading:R,endIcon:Object(C.jsx)(x.a,{}),children:"Save"})})]})})})})})}function z(){var e=Object(c.a)().themeStretch,t=Object(a.g)().pathname,n=Object(a.i)().name,u=t.includes("edit"),l=u?{name:"Set 1",brand:"Nike",bonuses:["Bonus 1","Bonus 2","Bonus 3"],endDate:new Date,ticketRules:["Default Historical Data","Default Followers"]}:{};return Object(C.jsx)(r.a,{title:"BonusSet: Create a new bonus",children:Object(C.jsxs)(s.a,{maxWidth:!e&&"lg",children:[Object(C.jsx)(o.a,{heading:u?"Edit Bonus Set":"Add Bonus Set",links:[{name:"Bonus Set",href:i.b.root},{name:u?n:"Add BonusSet"}]}),Object(C.jsx)(R,{isEdit:u,currentBonusSet:l})]})})}},693:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(3),s=n(33),i=n(176),c=n(640),r=n(228),o=n(229),u=n(665),l=n(39),d=n(0),b=["links","action","heading","moreLink","sx"];function j(e){var t=e.links,n=e.action,j=e.heading,O=e.moreLink,m=void 0===O?[]:O,h=e.sx,f=Object(s.a)(e,b);return Object(d.jsxs)(c.a,{sx:h,mb:5,spacing:2,children:[Object(d.jsxs)(c.a,{direction:"row",alignItems:"center",children:[Object(d.jsxs)(r.a,{sx:{flexGrow:1},children:[Object(d.jsx)(o.a,{variant:"h4",gutterBottom:!0,children:j}),Object(d.jsx)(l.a,Object(a.a)({links:t},f))]}),n&&Object(d.jsx)(r.a,{sx:{flexShrink:0},children:n})]}),Object(i.isString)(m)?Object(d.jsx)(u.a,{href:m,target:"_blank",variant:"body2",children:m}):m.map((function(e){return Object(d.jsx)(u.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"flex"},children:e},e)}))]})}},698:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var a=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,s=/^[a-zA-Z0-9 ]*$/,i=/^[a-zA-Z ]*$/},706:function(e,t,n){"use strict";var a=n(30),s=n(0);t.a=Object(a.a)(Object(s.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")},713:function(e,t,n){"use strict";var a=n(2),s=n(4),i=n(1),c=(n(9),n(11)),r=n(151),o=n(7),u=n(12),l=n(103),d=n(127);function b(e){return Object(l.a)("MuiCardContent",e)}Object(d.a)("MuiCardContent",["root"]);var j=n(0),O=["className","component"],m=Object(o.a)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),h=i.forwardRef((function(e,t){var n=Object(u.a)({props:e,name:"MuiCardContent"}),i=n.className,o=n.component,l=void 0===o?"div":o,d=Object(s.a)(n,O),h=Object(a.a)({},n,{component:l}),f=function(e){var t=e.classes;return Object(r.a)({root:["root"]},b,t)}(h);return Object(j.jsx)(m,Object(a.a)({as:l,className:Object(c.default)(f.root,i),styleProps:h,ref:t},d))}));t.a=h}}]);
//# sourceMappingURL=23.29d56122.chunk.js.map