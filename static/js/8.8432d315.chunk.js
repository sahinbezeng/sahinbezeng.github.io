(this["webpackJsonpdashboard-admin"]=this["webpackJsonpdashboard-admin"]||[]).push([[8],{675:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(3),a=n(26),i=n(173),s=n(629),c=n(277),o=n(222),l=n(651),d=n(37),j=n(0),u=["links","action","heading","moreLink","sx"];function b(e){var t=e.links,n=e.action,b=e.heading,h=e.moreLink,x=void 0===h?[]:h,O=e.sx,p=Object(a.a)(e,u);return Object(j.jsxs)(s.a,{sx:O,mb:5,spacing:2,children:[Object(j.jsxs)(s.a,{direction:"row",alignItems:"center",children:[Object(j.jsxs)(c.a,{sx:{flexGrow:1},children:[Object(j.jsx)(o.a,{variant:"h4",gutterBottom:!0,children:b}),Object(j.jsx)(d.a,Object(r.a)({links:t},p))]}),n&&Object(j.jsx)(c.a,{sx:{flexShrink:0},children:n})]}),Object(i.isString)(x)?Object(j.jsx)(l.a,{href:x,target:"_blank",variant:"body2",children:x}):x.map((function(e){return Object(j.jsx)(l.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"flex"},children:e},e)}))]})}},676:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,a=/^[a-zA-Z0-9 ]*$/,i=/^[a-zA-Z ]*$/},713:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var r=n(19),a=n(672),i=n(32),s=n(62),c=n(278),o=n(675),l=n(3),d=n(40),j=n.n(d),u=n(70),b=n(192),h=n(127),x=n(191),O=n(173),p=n(20),m=n(680),f=n.n(m),g=n(36),v=n(708),y=n(709),D=n(710),C=n(643),S=n(277),k=n(649),q=n(671),w=n(629),P=n(638),T=n(717),W=n(659),z=n(718),B=n(656),U=n(676),E=n(0),F={title:"",options:[""]},I=function(e,t){var n={title:"",description:"",percentageColor:"",starPerUser:void 0,startDate:void 0,end:void 0,questions:[F]};return e?Object(O.merge)({},n,e):n};function M(e){var t=e.isEdit,n=e.currentSurvey,a=Object(r.h)(),s=(Object(g.a)(),Object(h.useSnackbar)().enqueueSnackbar),c=b.f().shape({title:b.g().matches(U.b,"Cannot include special characters.").required("Title is required"),description:b.g(),percentageColor:b.g(),starPerUser:b.e().required("This field is required."),startDate:b.c(),endDate:b.c().when("startDate",(function(e,t){return e&&t.min(e,"End date must be later than start date")})),questions:b.a().of(b.f().shape({title:b.g(),options:b.a().of(b.g())}))}),o=Object(x.e)({enableReinitialize:!0,initialValues:I(n),validationSchema:c,onSubmit:function(){var e=Object(u.a)(j.a.mark((function e(n,r){var c,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=r.setSubmitting,o=r.resetForm,l=r.setErrors,alert(JSON.stringify(n));try{o(),c(!1),s(t?"Update success":"Create success",{variant:"success"}),a(i.b.survey.list)}catch(d){console.error(d),c(!1),l(d)}case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),d=o.errors,O=o.values,m=o.touched,M=o.handleSubmit,A=o.isSubmitting,J=o.setFieldValue,L=o.getFieldProps;return console.log("*** ",O,d),Object(E.jsx)(x.c,{value:o,children:Object(E.jsx)(x.b,{noValidate:!0,autoComplete:"off",onSubmit:M,children:Object(E.jsxs)(k.a,{container:!0,spacing:3,children:[Object(E.jsx)(k.a,{item:!0,xs:12,md:8,children:Object(E.jsx)(q.a,{sx:{p:3},children:Object(E.jsxs)(w.a,{spacing:3,children:[Object(E.jsx)(w.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:Object(E.jsx)(P.a,Object(l.a)(Object(l.a)({fullWidth:!0,size:"small",label:"Title"},L("title")),{},{error:Boolean(m.title&&d.title),helperText:m.title&&d.title}))}),Object(E.jsx)(w.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:Object(E.jsx)(P.a,Object(l.a)(Object(l.a)({fullWidth:!0,multiline:!0,rows:3,size:"small",label:"Description"},L("description")),{},{error:Boolean(m.description&&d.description),helperText:m.description&&d.description}))}),Object(E.jsxs)(w.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(E.jsx)(P.a,Object(l.a)(Object(l.a)({fullWidth:!0,size:"small",label:"Percentage Color"},L("percentageColor")),{},{error:Boolean(m.percentageColor&&d.percentageColor),helperText:m.percentageColor&&d.percentageColor})),Object(E.jsx)(P.a,Object(l.a)(Object(l.a)({fullWidth:!0,size:"small",label:"Star Per User",type:"number"},L("starPerUser")),{},{error:Boolean(m.starPerUser&&d.starPerUser),helperText:m.starPerUser&&d.starPerUser}))]}),Object(E.jsxs)(w.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(E.jsx)(D.a,{label:"Start date",value:O.startDate?O.startDate:new Date(null===n||void 0===n?void 0:n.startDate),inputFormat:"dd/MM/yyyy hh:mm a",onChange:function(e){return J("startDate",e)},renderInput:function(e){return Object(E.jsx)(P.a,Object(l.a)(Object(l.a)({},e),{},{fullWidth:!0,error:Boolean(m.startDate&&d.startDate),helperText:m.startDate&&d.startDate,sx:{mb:3}}))}}),Object(E.jsx)(D.a,{label:"End date",value:O.endDate?O.endDate:new Date(null===n||void 0===n?void 0:n.endDate),inputFormat:"dd/MM/yyyy hh:mm a",onChange:function(e){return J("endDate",e)},renderInput:function(e){return Object(E.jsx)(P.a,Object(l.a)(Object(l.a)({},e),{},{fullWidth:!0,error:Boolean(m.endDate&&d.endDate),helperText:m.endDate&&d.endDate,sx:{mb:3}}))}})]}),Object(E.jsx)(x.a,{name:"questions",render:function(e){return Object(E.jsxs)(q.a,{children:[Object(E.jsx)(T.a,{title:"Questions",action:Object(E.jsx)(W.a,{variant:"contained",startIcon:Object(E.jsx)(p.a,{icon:f.a}),onClick:function(){return e.push(F)},children:"Add New"})}),Object(E.jsx)(z.a,{children:Object(E.jsx)(w.a,{spacing:2,children:O.questions.map((function(e,t){return console.log("question index: ",t),Object(E.jsxs)(q.a,{children:[Object(E.jsx)(T.a,{title:"Question ".concat(t+1),titleTypographyProps:{variant:"h8"}}),Object(E.jsx)(z.a,{children:Object(E.jsxs)(w.a,{spacing:1,children:[Object(E.jsx)(P.a,Object(l.a)(Object(l.a)({fullWidth:!0,size:"small",label:"Title"},L("questions.".concat(t,".title"))),{},{error:Boolean(Object(x.d)(m,"questions.".concat(t,".title"))&&Object(x.d)(d,"questions.".concat(t,".title"))),helperText:Object(x.d)(m,"questions.".concat(t,".title"))&&Object(x.d)(d,"questions.".concat(t,".title"))})),Object(E.jsx)(x.a,{name:"questions.".concat(t,".options"),render:function(e){return Object(E.jsxs)(E.Fragment,{children:[O.questions[t].options.map((function(n,r){var a="questions.".concat(t,".options.").concat(r);return Object(E.jsxs)(w.a,{direction:"row",spacing:1,children:[Object(E.jsx)(P.a,Object(l.a)(Object(l.a)({fullWidth:!0,size:"small",label:"Option ".concat(r+1)},L(a)),{},{error:Boolean(Object(x.d)(m,a)&&Object(x.d)(d,a)),helperText:Object(x.d)(m,a)&&Object(x.d)(d,a)})),Object(E.jsx)(B.a,{color:"error","aria-label":"delete",onClick:function(){return e.remove(r)},children:Object(E.jsx)(v.a,{})})]},r)})),Object(E.jsx)(B.a,{color:"primary","aria-label":"plus",onClick:function(){return e.push("")},children:Object(E.jsx)(y.a,{})})]})}})]})})]},t)}))})})]})}}),Object(E.jsxs)(S.a,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:[Object(E.jsx)(W.a,{sx:{mr:2},variant:"outlined",onClick:function(){return console.log("Draft Clicked")},children:"Draft"}),Object(E.jsx)(C.a,{type:"submit",variant:"contained",loading:A,children:"Publish"})]})]})})}),Object(E.jsx)(k.a,{item:!0,xs:12,md:4,children:Object(E.jsx)(q.a,{sx:{p:3},children:"Later Phase"})})]})})})}function A(){var e=Object(s.a)().themeStretch,t=Object(r.g)().pathname,n=Object(r.i)().title,l=t.includes("edit");return Object(E.jsx)(c.a,{title:"Survey: Create a new survey",children:Object(E.jsxs)(a.a,{maxWidth:!e&&"lg",children:[Object(E.jsx)(o.a,{heading:l?"Edit Survey":"Create Survey",links:[{name:"Survey",href:i.b.survey.list},{name:l?n:"Create Survey"}]}),Object(E.jsx)(M,{isEdit:l,currentSurvey:{}})]})})}}}]);
//# sourceMappingURL=8.8432d315.chunk.js.map