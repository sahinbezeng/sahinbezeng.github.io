(this["webpackJsonpdashboard-admin"]=this["webpackJsonpdashboard-admin"]||[]).push([[21],{2315:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return T}));var a=n(23),r=n(690),s=n(20),i=n(64),c=n(284),o=n(693),u=n(3),l=n(42),d=n.n(l),b=n(70),j=(n(1),n(180)),m=n(128),O=n(172),f=n(145),h=n(179),p=n(707),x=n(2296),v=n(664),g=n(689),S=n(719),k=n(640),B=n(683),y=n(2304),D=n(2308),C=n(228),w=n(697),R=n(0),q=j.f().shape({name:j.g().matches(w.b,"Cannot include special characters.").required("Name is required"),brand:j.g().required("Brand is required"),bonuses:j.a(),endDate:j.c().nullable(!0),ticketRules:j.a()});function z(e){var t=e.isEdit,n=e.currentBonusSet,r=Object(a.h)(),i=Object(m.useSnackbar)().enqueueSnackbar,c=Object(h.e)({enableReinitialize:!0,initialValues:{name:(null===n||void 0===n?void 0:n.name)||"",brand:(null===n||void 0===n?void 0:n.brand)||"Adidas",bonuses:(null===n||void 0===n?void 0:n.bonuses)||[],endDate:(null===n||void 0===n?void 0:n.endDate)?new Date(n.endDate):null,ticketRules:(null===n||void 0===n?void 0:n.ticketRules)||[]},validationSchema:q,onSubmit:function(){var e=Object(b.a)(d.a.mark((function e(n,a){var c,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=a.setSubmitting,o=a.resetForm,u=a.setErrors,alert(JSON.stringify(n));try{o(),c(!1),i(t?"Update success":"Create success",{variant:"success"}),r(s.b.bonus.list)}catch(l){console.error(l),c(!1),u(l)}case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),o=c.errors,l=c.values,j=c.touched,w=c.handleSubmit,z=c.isSubmitting,T=c.setFieldValue,N=c.getFieldProps;return console.log("*** ",l,o),Object(R.jsx)(h.c,{value:c,children:Object(R.jsx)(h.b,{noValidate:!0,autoComplete:"off",onSubmit:w,children:Object(R.jsx)(g.a,{children:Object(R.jsx)(S.a,{children:Object(R.jsxs)(k.a,{spacing:3,children:[Object(R.jsxs)(k.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(R.jsx)(B.a,Object(u.a)(Object(u.a)({fullWidth:!0,size:"small",label:"Name"},N("name")),{},{error:Boolean(j.name&&o.name),helperText:j.name&&o.name})),Object(R.jsx)(B.a,Object(u.a)(Object(u.a)({select:!0,fullWidth:!0,size:"small",label:"Select Brand",placeholder:"Brand"},N("brand")),{},{SelectProps:{native:!0},error:Boolean(j.brand&&o.brand),helperText:j.brand&&o.brand,children:["Adidas","Nike"].map((function(e,t){return Object(R.jsx)("option",{value:e,children:e},e+t)}))})),Object(R.jsx)(x.a,{label:"End date",value:l.endDate?l.endDate:T("endDate",Object(O.a)(new Date,45)),inputFormat:"dd/MM/yyyy hh:mm a",onChange:function(e){return Object(f.a)(e)?T("endDate",e):null},renderInput:function(e){return Object(R.jsx)(B.a,Object(u.a)(Object(u.a)({},e),{},{size:"small",fullWidth:!0,error:Boolean(j.endDate&&o.endDate),helperText:j.endDate&&o.endDate,sx:{mb:3}}))}})]}),Object(R.jsxs)(k.a,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[Object(R.jsx)(y.a,{fullWidth:!0,multiple:!0,disableCloseOnSelect:!0,size:"small",value:l.bonuses,onChange:function(e,t){console.log(t),T("bonuses",t)},options:[{name:"Bonus 1",quantity:100},{name:"Bonus 2",quantity:50},{name:"Bonus 3",quantity:200},{name:"Bonus 4",quantity:40},{name:"Bonus 5",quantity:120}],isOptionEqualToValue:function(e,t){return e.name===t.name},renderTags:function(e,t){return e.map((function(e,n){return Object(R.jsx)(D.a,Object(u.a)({label:"".concat(e.name," Qty: ").concat(e.quantity)},t({index:n})),n)}))},getOptionLabel:function(e){return e.name},renderOption:function(e,t){return Object(R.jsxs)(C.a,Object(u.a)(Object(u.a)({component:"li",sx:{fontSize:15,"& > span":{mr:"10px",fontSize:18}}},e),{},{children:[t.name," Qty: ",t.quantity]}))},renderInput:function(e){return Object(R.jsx)(B.a,Object(u.a)(Object(u.a)({},e),{},{label:"Bonuses",error:Boolean(j.bonuses&&o.bonuses),helperText:j.bonuses&&o.bonuses||"Total value of this bonus set: ".concat(l.bonuses.reduce((function(e,t){return e+5*t.quantity}),0))}))}}),Object(R.jsx)(y.a,{fullWidth:!0,multiple:!0,disableCloseOnSelect:!0,size:"small",value:l.ticketRules,onChange:function(e,t){T("ticketRules",t)},options:["Default Historical Data","Default App Level","Default Followers","Default Social","Historical V2"],renderInput:function(e){return Object(R.jsx)(B.a,Object(u.a)(Object(u.a)({},e),{},{label:"Ticket Rules",error:Boolean(j.ticketRules&&o.ticketRules),helperText:j.ticketRules&&o.ticketRules}))}})]}),Object(R.jsx)(C.a,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:Object(R.jsx)(v.a,{type:"submit",variant:"contained",loading:z,endIcon:Object(R.jsx)(p.a,{}),children:"Save"})})]})})})})})}n(703);function T(){var e=Object(i.a)().themeStretch,t=Object(a.g)().pathname,n=Object(a.i)().name,u=t.includes("edit"),l=u?{name:"Set 1",brand:"Nike",bonuses:["Bonus 1","Bonus 2","Bonus 3"],endDate:new Date,ticketRules:["Default Historical Data","Default Followers"]}:{};return Object(R.jsx)(c.a,{title:"BonusSet: Create a new bonus",children:Object(R.jsxs)(r.a,{maxWidth:!e&&"lg",children:[Object(R.jsx)(o.a,{heading:u?"Edit Bonus Set":"Add Bonus Set",links:[{name:"Bonus Set",href:s.b.root},{name:u?n:"Add BonusSet"}]}),Object(R.jsx)(z,{isEdit:u,currentBonusSet:l})]})})}},693:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(3),r=n(33),s=n(176),i=n(640),c=n(228),o=n(229),u=n(665),l=n(39),d=n(0),b=["links","action","heading","moreLink","sx"];function j(e){var t=e.links,n=e.action,j=e.heading,m=e.moreLink,O=void 0===m?[]:m,f=e.sx,h=Object(r.a)(e,b);return Object(d.jsxs)(i.a,{sx:f,mb:5,spacing:2,children:[Object(d.jsxs)(i.a,{direction:"row",alignItems:"center",children:[Object(d.jsxs)(c.a,{sx:{flexGrow:1},children:[Object(d.jsx)(o.a,{variant:"h4",gutterBottom:!0,children:j}),Object(d.jsx)(l.a,Object(a.a)({links:t},h))]}),n&&Object(d.jsx)(c.a,{sx:{flexShrink:0},children:n})]}),Object(s.isString)(O)?Object(d.jsx)(u.a,{href:O,target:"_blank",variant:"body2",children:O}):O.map((function(e){return Object(d.jsx)(u.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"flex"},children:e},e)}))]})}},697:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,r=/^[a-zA-Z0-9 ]*$/,s=/^[a-zA-Z ]*$/},703:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return"/static/mock-images/products/product_".concat(e,".jpg")}},707:function(e,t,n){"use strict";var a=n(30),r=n(0);t.a=Object(a.a)(Object(r.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")},719:function(e,t,n){"use strict";var a=n(2),r=n(4),s=n(1),i=(n(9),n(11)),c=n(151),o=n(7),u=n(12),l=n(103),d=n(127);function b(e){return Object(l.a)("MuiCardContent",e)}Object(d.a)("MuiCardContent",["root"]);var j=n(0),m=["className","component"],O=Object(o.a)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),f=s.forwardRef((function(e,t){var n=Object(u.a)({props:e,name:"MuiCardContent"}),s=n.className,o=n.component,l=void 0===o?"div":o,d=Object(r.a)(n,m),f=Object(a.a)({},n,{component:l}),h=function(e){var t=e.classes;return Object(c.a)({root:["root"]},b,t)}(f);return Object(j.jsx)(O,Object(a.a)({as:l,className:Object(i.default)(h.root,s),styleProps:f,ref:t},d))}));t.a=f}}]);
//# sourceMappingURL=21.1bd6ee4c.chunk.js.map